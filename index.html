<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<title>gallery 3d, 3d 相册</title>
	<meta name="title" content="gallery 3d " />
	<meta name="author" content="liyuan dong" />
	<meta name="subject" content="gallery 3d, 3d 相册" />
	<meta name="description" content="html5+原生javascript,css3实现的3d 相册" />
	<meta name="keywords" content="html5, javascript,css3, animation,animate,3d,transform,transition,2d" />
	<meta name="generator" content="brakets" />
	<meta name="language" content="en,cn" />
	<meta name="expires" content="" />
	<meta name="abstract" content="html5,javascript,css3实现的3d 相册" />
	<meta name="abstract" content="" />
	<meta name="designer" content="liyuan dong" />
	<meta name="publisher" content="liyuan dong" />
	<meta name="revisit-after" content="" />
	<meta name="distribution" content="global" />
	<meta name="robots" content="all" />
	<link rel="stylesheet" type="text/css" href="css/gallery3d.css">
	<style>
	body {
			overflow: hidden;
			margin: 0;
			padding: 0;
			background-image: url(css/o_wood.jpg);
		}
		
		.album {
			width: 100%;
			height: 100%;
			background-size: cover;
			top: 0;
			left: 0;
			transition: 0.7s all;
		}
		
		.buttons {
			position: absolute;
			right: 50px;
			top: 10px;
			z-index: 99;
		}
		
		.button {
			display: inline-block;
			margin: 5px;
			font-size: 15px;
			transition: all .5s;
			display: inline-block;
			padding: 7px 15px 7px 15px;
			border-radius: 10px;
			background-color: rgb(33, 150, 243);
			box-shadow: 5px 5px 5px 1px rgba(0, 0, 0, 1);
			text-decoration: none;
		}
		
		.button:hover {
			background-color: #31b158;
			color: white
		}
		
		.button:active {
			box-shadow: 5px 5px 5px 1px rgba(0, 0, 0, 1);
		}
		
		.info {
			position: fixed;
			width: 50px;
			height: 50px;
			top: 10px;
			left: 10px;
			transition: 0.7s all;
			cursor: default;
			overflow: hidden;
		}
		
		.info:hover {
			width: 500px;
			color: aliceblue;
			border-radius: 0;
		}
		
		.info:hover > div:nth-child(1) {}
		
		.info:hover > div:nth-child(2) {}
		
		.info > div {
			position: absolute;
			display: inline-block;
			background-color: rgba(0, 0, 0, 0.33);
		}
		
		.info > div:nth-child(1) {
			width: 50px;
			height: 50px;
		}
		
		.info > div:nth-child(1) p {
			line-height: 50px;
			text-align: center;
			margin: 0;
			font-size: 2em;
		}
		
		.info > div:nth-child(2) {
			left: 50px;
			width: 500px;
		}
		
		.keyDirectinos {
			position: fixed;
			right: 50px;
			top: 60px;
			z-index: 99;
			width: 90px;
		}
		
		.keyDirectinos > div {
			height: 26px;
			width: 100%;
			position: relative;
			display: inline-block;
		}
		
		.keyDirectinos > div > span {
			height: 30px;
			width: 30px;
			position: relative;
			float: left;
			text-align: center;
			line-height: 30px;
			font-size: 1.5em;
			color: black;
			cursor: default;
			transition: all 0.3s;
		}
		
		.keyDirectinos > div:nth-child(1) > span:nth-child(2) {
			background-color: rgba(0, 0, 0, 0.33);
		}
		
		.keyDirectinos > div:nth-child(2) > span {
			background-color: rgba(0, 0, 0, 0.33);
		}
		
		.keyDirectinos > div:nth-child(2) > span:nth-child(3) {
			transform: rotateY(180deg)
		}
		
		.keyDirectinos > div:nth-child(3) > span:nth-child(2) {
			background-color: rgba(0, 0, 0, 0.33);
		}
		
		.keyDirectinos > div:nth-child(1) > span:nth-child(2):hover,
		.keyDirectinos > div:nth-child(2) > span:nth-child(1):hover,
		.keyDirectinos > div:nth-child(2) > span:nth-child(3):hover,
		.keyDirectinos > div:nth-child(3) > span:nth-child(2):hover {
			color: aliceblue;
		}
		
		.keyDirectinos > div:nth-child(1) > span:nth-child(2):active,
		.keyDirectinos > div:nth-child(2) > span:nth-child(1):active,
		.keyDirectinos > div:nth-child(2) > span:nth-child(2):active,
		.keyDirectinos > div:nth-child(2) > span:nth-child(3):active,
		.keyDirectinos > div:nth-child(3) > span:nth-child(2):active {
			box-shadow: 2px 2px 5px 1px rgba(0, 0, 0, .9) inset;
		}
		
		.message {
			position: fixed;
			text-align: center;
			line-height: 30px;
			font-size: 1.5em;
			color: black;
			cursor: default;
			transition: all 3s;
			right: 50px;
			top: 170px;
			z-index: 99;
			background-color: rgba(0, 0, 0, 0.33);
			font-size: 1.2em;
			border-radius: 15px;
			padding: 5px;
			color: whitesmoke;
		}
		
		.invisible {
			opacity: 0;
		}
	}
	</style>
</head>

<body>
	<!--Controll Start-->
	<div class="buttons">
		<a id="effectChange" class="button" href="#">散列</a>
		<a id="reset" class="button" href="#">重置</a>
		<a id="addMore" class="button" href="#">更多</a>
	</div>


	<div id="keyDirectinos" class="keyDirectinos">
		<div>
			<span></span>
			<span id='up'>⬆</span>
			<span></span>
		</div>
		<div>
			<span id='left'>⬅</span>
			<span id='mouse'>🖱</span>
			<span id='right'>⬅</span>
		</div>
		<div>
			<span></span>
			<span id='down'>⬇</span>
			<span></span>
		</div>
	</div>
	<div id="message" class="message invisible">
		按下鼠标左键并移动鼠标看看
		<br/> left-click & hold, then move your mouse
	</div>
	<!--Controll End-->


	<!--Gallery Start-->
	<div id="baseContainer" class="baseContainer">
		<div id="containers" class="containers">
		</div>
	</div>
	<!--Gallery End-->

	<div class="info">
		<div>
			<p>ℹ︎</p>
		</div>
		<div>
			<p>
				<i>Author:</i> <strong>Liyuan Dong</strong> |
				<i>Github:</i> <strong><a href="https://github.com/happydongzh" target="_blank">https://github.com/happydongzh</a></strong>
			</p>
		</div>

	</div>

	<script src="https://cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
	<script type="text/javascript" src="javascript/gallery3d.js"></script>
	<script type="text/javascript">
		var effectChange = document.getElementById('effectChange');

		var g3d = new Gallery3d(document.getElementById('containers'), {
			style: 'rect',
			effect: effectChange.text == '矩阵' ? 'martrix' : 'hash', //排列形式，random：散列 | martrix：矩阵
			elmtSize: {
				w: 150,
				h: 150
			},
			//layerConSize: {w: 800,h: 600},
			elementRender: function (cell, data) {
				cell.innerHTML = '<div class="album" style="background-image:url(' + data.albumpic_big + ')"></div>';
			},
			elementClick: function (data) {
				/**
				do whatever you want
				console.log(this);
				console.log(data);
				**/
			},
			perspective: 500,
			//点击元素时,是否幻灯片显示 open slide-show when cell click
			osswcc: true

		});

		$.getJSON('./data.json', function (json) {
			g3d.go(json.showapi_res_body.pagebean.songlist.slice(0, 30));
		});

		effectChange.addEventListener('click', function (e) {
			g3d.switchEffect(this.text == '矩阵' ? 'hash' : 'martrix');
			this.text = this.text == '矩阵' ? '散列' : '矩阵';
		}, false);

		document.getElementById('reset').addEventListener('click', function (e) {
			g3d.reset();
		}, false);

		document.getElementById('addMore').addEventListener('click', function (e) {
			$.getJSON('./data.json', function (json) {
				g3d.more(json.showapi_res_body.pagebean.songlist.slice(31, 60));
			});

		}, false);

		document.getElementById('keyDirectinos').addEventListener('click', function (e) {
			//console.log(e.target.id);
			var step = 50;
			var dir = e.target.id;
			switch (dir) {
			case "up":
				g3d.translate3d.y--
					break;
			case "down":
				g3d.translate3d.y++
					break;
			case "left":
				g3d.translate3d.x--
					break;
			case "right":
				g3d.translate3d.x++
					break;
			case "mouse":
				var msg = document.getElementById('message');
				msg.className = msg.className.indexOf('invisible') == -1 ? 'message invisible' :
					'message';
				break;
			default:

			};

			g3d.containers.style.transform = 'rotateX(' + g3d.rotate3d.y + 'deg) rotateY(' + -g3d.rotate3d.x + 'deg) rotateZ(' + g3d.rotate3d.z + 'deg) translateX(' + g3d.translate3d.x * step + 'px) translateY(' + g3d.translate3d.y * step + 'px) translateZ(' + g3d.translate3d.z + 'px) ';
		}, false);
	</script>
</body>

</html>